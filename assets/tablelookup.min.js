;var TableLookupWizard=function(){"use strict";return function(e){function s(e){if(e.target.checked){e.target.getParent("tr").removeClass("found").inject(n.getElement("tr.search"),"before")}else{e.target.getParent("tr").destroy();n.send(r)}}function o(e){e.target.getParent("tr").removeClass("found").inject(i,"before");e.target.getParent("tr").getAllPrevious().destroy();n.send(r)}var t,n,r,i;n=document.id("ctrl_"+e);i=n.getElement("tr.reset, tr.search");r=window.location.href+"&tableLookupWizard="+e;n.getElement(".jserror").setStyle("display","none");n.getElement(".search").setStyle("display",Browser.ie&&Browser.version<8||Browser.Engine&&Browser.Engine.trident&&Browser.Engine.version<6?"block":"table-row");n.getElements("tbody tr").each(function(e){var t=e.getElement("input[type=checkbox]")||e.getElement("input[type=radio]");if(t){t.addEvent("change",function(e){if(e.target.getParent("tr").hasClass("reset")){e.target.getParent("tr").getAllPrevious().destroy()}else{e.target.getParent("tr").destroy()}n.send(r)})}});n.set("send",{method:"get",link:"cancel",onSuccess:function(e){var t;try{e=JSON.decode(e).content}catch(r){}n.getElements(".search input.tl_text").setStyle("background-image","none");n.getElements("tr.found").destroy();t=Elements.from(e,false);n.getElement("tbody").adopt(t);t.each(function(e){if(e.getElement("input[type=checkbox]"))e.getElement("input[type=checkbox]").addEvent("click",s);if(e.getElement("input[type=radio]"))e.getElement("input[type=radio]").addEvent("click",o)})}}).addEvent("keyup",function(){clearTimeout(t);t=setTimeout(function(){n.getElement(".search input.tl_text").setStyle("background-image","url(system/modules/tablelookupwizard/assets/loading.gif)");n.send(r)},300)})}}();