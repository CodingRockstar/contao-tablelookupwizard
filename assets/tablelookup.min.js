var TableLookupWizard=(function(){return function(b){var g,e,a,f;function d(h){if(h.target.checked){h.target.getParent("tr").removeClass("found").inject(e.getElement("tr.search"),"before")}else{h.target.getParent("tr").destroy();e.send(a)}}function c(h){h.target.getParent("tr").removeClass("found").inject(f,"before");h.target.getParent("tr").getAllPrevious().destroy();e.send(a)}e=document.id(b);f=e.getElement("tr.reset, tr.search");a=window.location.href+"&tableLookupWizard="+b;e.getElement(".jserror").setStyle("display","none");e.getElement(".search").setStyle("display",(((Browser.ie&&Browser.version<8)||(Browser.Engine&&Browser.Engine.trident&&Browser.Engine.version<6))?"block":"table-row"));e.getElements("tbody tr").each(function(i){var h=i.getElement("input[type=checkbox]")||i.getElement("input[type=radio]");if(h){h.addEvent("change",function(j){if(j.target.getParent("tr").hasClass("reset")){j.target.getParent("tr").getAllPrevious().destroy()}else{j.target.getParent("tr").destroy()}e.send(a)})}});e.set("send",{method:"get",link:"cancel",onSuccess:function(j){var i;try{j=JSON.decode(j).content}catch(h){}e.getElements(".search input.tl_text").setStyle("background-image","none");e.getElements("tr.found").destroy();i=Elements.from(j,false);e.getElement("tbody").adopt(i);i.each(function(k){if(k.getElement("input[type=checkbox]")){k.getElement("input[type=checkbox]").addEvent("click",d)}if(k.getElement("input[type=radio]")){k.getElement("input[type=radio]").addEvent("click",c)}})}}).addEvent("keyup",function(){clearTimeout(g);g=setTimeout(function(){e.getElement(".search input.tl_text").setStyle("background-image","url(system/modules/tablelookupwizard/assets/loading.gif)");e.send(a)},300)})}})();